// ffDataview http://github.com/ukyo/ffDataView
(function(){function e(a,b,c){if(null==a||a.constructor!==ArrayBuffer)throw new TypeError("Type error");this.buffer=a;b=b||0;c=c||a.byteLength-b;if("number"===typeof b){b=~~b;if(0>b||b>=a.byteLength)throw Error("INDEX_SIZE_ERR");this.byteOffset=b}else throw new TypeError("Type error");if("number"===typeof c){c=~~c;if(0>a.byteLength-(b+c))throw Error("INDEX_SIZE_ERR");this.byteLength=c}else throw new TypeError("Type error");this._bytes=new Uint8Array(this.buffer,this.byteOffset,this.byteLength);this._sbytes=
new Int8Array(this.buffer,this.byteOffset,this.byteLength)}var d=e.prototype;d._getNumber=function(a,b,c,d){b=this._getBytes(b,c);return(new a((new Uint8Array(d?b:b.reverse())).buffer))[0]};d._setNumber=function(a,b,c,d){for(var a=new Uint8Array((new a([c])).buffer),c=[],e=a.length;e;)c[--e]=a[e];this._bytes.set(new Uint8Array(d?c:c.reverse()),b)};d._getBytes=function(a,b){for(var c=this._bytes.subarray(a,a+b),d=c.length,e=[];d;)e[--d]=c[d];return e};d.getInt8=function(a){return this._sbytes[a]};
d.getUint8=function(a){return this._bytes[a]};d.getInt16=function(a,b){return this._getNumber(Int16Array,a,2,b)};d.getUint16=function(a,b){return this._getNumber(Uint16Array,a,2,b)};d.getInt32=function(a,b){return this._getNumber(Int32Array,a,4,b)};d.getUint32=function(a,b){return this._getNumber(Uint32Array,a,4,b)};d.getFloat32=function(a,b){return this._getNumber(Float32Array,a,4,b)};d.getFloat64=function(a,b){return this._getNumber(Float64Array,a,8,b)};d.setInt8=function(a,b){this._sbytes[a]=b};
d.setUint8=function(a,b){this._bytes[a]=b};d.setInt16=function(a,b,c){this._setNumber(Int16Array,a,b,c)};d.setUint16=function(a,b,c){this._setNumber(Uint16Array,a,b,c)};d.setInt32=function(a,b,c){this._setNumber(Int32Array,a,b,c)};d.setUint32=function(a,b,c){this._setNumber(Uint32Array,a,b,c)};d.setFloat32=function(a,b,c){this._setNumber(Float32Array,a,b,c)};d.setFloat64=function(a,b,c){this._setNumber(Float64Array,a,b,c)};this.ffDataView=e}).call(this);var DataView=DataView||ffDataView;(function(e){var d=e.prototype;e.create=function(a,b,c){switch(a.constructor){case ArrayBuffer:return c=c||a.byteLength,new e(a,b||0,c);case Uint8Array:case Int8Array:return b=null!=b?b:a.byteOffset,c=null!=c?c:a.length,new e(a.buffer,b,c);case Number:return new e(new ArrayBuffer(a));default:throw new TypeError("Type error");}};d.getInt24=function(a,b){var c=this.getUint24(a,b);return c&8388608?c-16777216:c};d.getUint24=function(a,b){var c=new Uint8Array(this.buffer,this.byteOffset+a);return b?c[0]|
c[1]<<8|c[2]<<16:c[2]|c[1]<<8|c[0]<<16};d.getString=function(a,b){for(var c=new Uint8Array(this.buffer,this.byteOffset+a),d=[];b;)d[--b]=c[b];return String.fromCharCode.apply(null,d)};d.setInt24=function(a,b,c){a=new Uint8Array(this.buffer,this.byteOffset+a);c?(a[0]=b&255,a[1]=(b&65280)>>8,a[2]=(b&16711680)>>16):(a[2]=b&255,a[1]=(b&65280)>>8,a[0]=(b&16711680)>>16)};d.setUint24=function(a,b,c){this.setInt24(a,b,c)};d.setString=function(a,b){for(var c=new Uint8Array(this.buffer,this.byteOffset+a),d=
b.length;d;)c[--d]=b.charCodeAt(d)}})(DataView);
