// ffDataview http://github.com/ukyo/ffDataView
(function(){function f(b,a,c){if(null==b||b.constructor!==ArrayBuffer)throw new TypeError("Type error");this.buffer=b;a=a||0;c=c||b.byteLength-a;if("number"===typeof a){a=~~a;if(0>a||a>=b.byteLength)throw Error("INDEX_SIZE_ERR");this.byteOffset=a}else throw new TypeError("Type error");if("number"===typeof c){c=~~c;if(0>b.byteLength-(a+c))throw Error("INDEX_SIZE_ERR");this.byteLength=c}else throw new TypeError("Type error");this._bytes=new Uint8Array(this.buffer,this.byteOffset,this.byteLength);this._sbytes=
new Int8Array(this.buffer,this.byteOffset,this.byteLength)}var e=f.prototype,d=!(new Uint8Array((new Uint16Array([1])).buffer))[0];e._getNumber=function(b,a,c,e){a=this._getBytes(a,c);d&&(a=a.reverse());return(new b((new Uint8Array(e?a:a.reverse())).buffer))[0]};e._setNumber=function(b,a,c,e){for(var b=new Uint8Array((new b([c])).buffer),c=[],d=b.length;d;)c[--d]=b[d];this._bytes.set(new Uint8Array(e?c:c.reverse()),a)};e._getBytes=function(b,a){for(var c=this._bytes.subarray(b,b+a),d=c.length,e=[];d;)e[--d]=
c[d];return e};e.getInt8=function(b){return this._sbytes[b]};e.getUint8=function(b){return this._bytes[b]};e.getInt16=function(b,a){return this._getNumber(Int16Array,b,2,a)};e.getUint16=function(b,a){return this._getNumber(Uint16Array,b,2,a)};e.getInt32=function(b,a){return this._getNumber(Int32Array,b,4,a)};e.getUint32=function(b,a){return this._getNumber(Uint32Array,b,4,a)};e.getFloat32=function(b,a){return this._getNumber(Float32Array,b,4,a)};e.getFloat64=function(b,a){return this._getNumber(Float64Array,
b,8,a)};e.setInt8=function(b,a){this._sbytes[b]=a};e.setUint8=function(b,a){this._bytes[b]=a};e.setInt16=function(b,a,c){this._setNumber(Int16Array,b,a,c)};e.setUint16=function(b,a,c){this._setNumber(Uint16Array,b,a,c)};e.setInt32=function(b,a,c){this._setNumber(Int32Array,b,a,c)};e.setUint32=function(b,a,c){this._setNumber(Uint32Array,b,a,c)};e.setFloat32=function(b,a,c){this._setNumber(Float32Array,b,a,c)};e.setFloat64=function(b,a,c){this._setNumber(Float64Array,b,a,c)};this.ffDataView=f}).call(this);var DataView=DataView||ffDataView;(function(f){var e=f.prototype;f.create=function(d,b,a){switch(d.constructor){case ArrayBuffer:return a=a||d.byteLength,new f(d,b||0,a);case Uint8Array:case Int8Array:return b=null!=b?b:d.byteOffset,a=null!=a?a:d.length,new f(d.buffer,b,a);case Number:return new f(new ArrayBuffer(d));default:throw new TypeError("Type error");}};e.getInt24=function(d,b){var a=this.getUint24(d,b);return a&8388608?a-16777216:a};e.getUint24=function(d,b){var a=new Uint8Array(this.buffer,this.byteOffset+d);return b?a[0]|
a[1]<<8|a[2]<<16:a[2]|a[1]<<8|a[0]<<16};e.getString=function(d,b){for(var a=new Uint8Array(this.buffer,this.byteOffset+d),c=[];b;)c[--b]=a[b];return String.fromCharCode.apply(null,c)};e.setInt24=function(d,b,a){d=new Uint8Array(this.buffer,this.byteOffset+d);a?(d[0]=b&255,d[1]=(b&65280)>>8,d[2]=(b&16711680)>>16):(d[2]=b&255,d[1]=(b&65280)>>8,d[0]=(b&16711680)>>16)};e.setUint24=function(d,b,a){this.setInt24(d,b,a)};e.setString=function(d,b){for(var a=new Uint8Array(this.buffer,this.byteOffset+d),c=
b.length;c;)a[--c]=b.charCodeAt(c)}})(DataView);
