// ffDataview http://github.com/ukyo/ffDataView
(function(){function f(a,b,c){if(null==a||a.constructor!==ArrayBuffer)throw"Type error";this.buffer=a;b=b||0;c=c||a.byteLength-b;if("number"===typeof b){b=~~b;if(0>b||b>=a.byteLength)throw"Index size error";this.byteOffset=b}else throw"Type error";if("number"===typeof c){c=~~c;if(0>a.byteLength-(b+c))throw"Index size error";this.byteLength=c}else throw"Type error";this._bytes=new Uint8Array(this.buffer,this.byteOffset,this.byteLength);this._sbytes=new Int8Array(this.buffer,this.byteOffset,this.byteLength)}
f.prototype={_getNumber:function(a,b,c,d){b=this._getBytes(b,c);return(new a((new Uint8Array(d?b:b.reverse())).buffer))[0]},_setNumber:function(a,b,c,d){for(var a=new Uint8Array((new a([c])).buffer),c=[],e=a.length;e;)c[--e]=a[e];this._bytes.set(new Uint8Array(d?c:c.reverse()),b)},_getBytes:function(a,b){for(var c=this._bytes.subarray(a,a+b),d=c.length,e=[];d;)e[--d]=c[d];return e},getInt8:function(a){return this._sbytes[a]},getUint8:function(a){return this._bytes[a]},getInt16:function(a,b){return this._getNumber(Int16Array,
a,2,b)},getUint16:function(a,b){return this._getNumber(Uint16Array,a,2,b)},getInt32:function(a,b){return this._getNumber(Int32Array,a,4,b)},getUint32:function(a,b){return this._getNumber(Uint32Array,a,4,b)},getFloat32:function(a,b){return this._getNumber(Float32Array,a,4,b)},getFloat64:function(a,b){return this._getNumber(Float64Array,a,8,b)},setInt8:function(a,b){this._sbytes[a]=b},setUint8:function(a,b){this._bytes[a]=b},setInt16:function(a,b,c){this._setNumber(Int16Array,a,b,c)},setUint16:function(a,
b,c){this._setNumber(Uint16Array,a,b,c)},setInt32:function(a,b,c){this._setNumber(Int32Array,a,b,c)},setUint32:function(a,b,c){this._setNumber(Uint32Array,a,b,c)},setFloat32:function(a,b,c){this._setNumber(Float32Array,a,b,c)},setFloat64:function(a,b,c){this._setNumber(Float64Array,a,b,c)}};this.ffDataView=f}).call(this);var DataView=DataView||ffDataView;(function(f){var a=f.prototype;f.create=function(b,c,a){var e=b.constructor;if(e===ArrayBuffer)return a=a||b.byteLength,new f(b,c||0,a);if(e===Uint8Array||e===Int8Array)return c=null!=c?c:b.byteOffset,a=null!=a?a:b.length,new f(b.buffer,c,a);throw"TypeError";};a.getInt24=function(b,a){var d=this.getUint24(b,a);return d&8388608?d-16777216:d};a.getUint24=function(b,a){var d=new Uint8Array(this.buffer,this.byteOffset+b);return a?d[0]|d[1]<<8|d[2]<<16:d[2]|d[1]<<8|d[0]<<16};a.getString=function(b,a){for(var d=
new Uint8Array(this.buffer,this.byteOffset+b),e=[];a;)e[--a]=d[a];return String.fromCharCode.apply(null,e)};a.setInt24=function(b,a,d){b=new Uint8Array(this.buffer,this.byteOffset+b);d?(b[0]=a&255,b[1]=(a&65280)>>8,b[2]=(a&16711680)>>16):(b[2]=a&255,b[1]=(a&65280)>>8,b[0]=(a&16711680)>>16)};a.setUint24=function(a,c,d){this.setInt24(a,c,d)};a.setString=function(a,c){for(var d=new Uint8Array(this.buffer,this.byteOffset+a),e=c.length;e;)d[--e]=c.charCodeAt(e)}})(DataView);
